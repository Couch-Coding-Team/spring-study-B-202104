# 2-2 UserDaoTest 개선

## 2.2.1 테스트 검증의 자동화

---

- 모든 테스트는 성공과 실패의 두 가지 결과를 가질 수 있다
- 테스트 에러 = 테스트가 진행되는 동안에 에러가 발생해서 실패하는 경우
- 테스트 실패 = 테스트 작업중에 에러가 발생하지 않았지만 그 결과가 기대한 것과 다르게 나오는 경우
- 테스트 에러는 콘솔에 에러 메시지와 긴 호출 스택 정보가 출력되어서 발견이 쉬움
- 테스트 실패는 별도의 확인 작업과 그 결과가 있어야만 함

//수정전 테스트 코드

![2-2%20UserDaoTest%20%E1%84%80%E1%85%A2%E1%84%89%E1%85%A5%E1%86%AB%207f6723ab542147d5a9f4b6ecf94cc5c9/Untitled.png](2-2%20UserDaoTest%20%E1%84%80%E1%85%A2%E1%84%89%E1%85%A5%E1%86%AB%207f6723ab542147d5a9f4b6ecf94cc5c9/Untitled.png)

//수정 후 테스트 코드

![2-2%20UserDaoTest%20%E1%84%80%E1%85%A2%E1%84%89%E1%85%A5%E1%86%AB%207f6723ab542147d5a9f4b6ecf94cc5c9/Untitled%201.png](2-2%20UserDaoTest%20%E1%84%80%E1%85%A2%E1%84%89%E1%85%A5%E1%86%AB%207f6723ab542147d5a9f4b6ecf94cc5c9/Untitled%201.png)

수정 후 테스트 코드는 두가지 기능이 정상적으로 작동이 되는지 확인 할 수 잇음

다른 프레임워크로 변동해도 이 코드로 전과 같이 정상 작동 되는지 확인할 수 잇음

> 자동화된 테스트를 위한 xUnit 프레임워크 만든 켄트 백
"테스트란 개발자가 마음 편하게 잠자리에 들 수 있게 해주는 것"

- 만들어진 코드의 기능을 모두 점검 할 수 있는 포괄적인 테스트를 만들면서 테스트를 통해 과감한 수정 후 변경에 영향을 받는 부분을 확인하면 마음이 편해짐

## 2.2.2 테스트의 효율적인 수행과 결과 관리

---

- main() 메소드를 이용한 테스트 작성 방법만으로는 애플리케이션 규모가 커지고 테스트 개수가 많아지면 테스트를 수행하는 일이 점점 부담이 될 것
- JUnit = 프로그래머를 위한 자바 테스팅 프레임워크

<JUnit 테스트로 전환>

- 프레임워트는 개발자가 만든 클래스에 대한 제어 권한을 넘겨받아서 주도적으로 애플리케이션의 흐름을 제어한다. ⇒ 제어의 역전(IoC) ⇒ 개발자가 만든 클래스의 오브젝트를 생성하고 실행하는 일은 프레임워크 관할

<테스트 메소드 전환>

- main() 메소드는 그런 면에서 프레임워크에 적용하기 적합하지 않아서 메소드에 있던 테스트 코드를 일반 메소드로 옮기는 것

    #) JUnit 프레임워크가 요구하는 조건 2가지

(1) 메소드가 public 으로 선언되어야 함

(2) 메소드에 @Test 라는 어노테이션을 붙여줌

![2-2%20UserDaoTest%20%E1%84%80%E1%85%A2%E1%84%89%E1%85%A5%E1%86%AB%207f6723ab542147d5a9f4b6ecf94cc5c9/Untitled%202.png](2-2%20UserDaoTest%20%E1%84%80%E1%85%A2%E1%84%89%E1%85%A5%E1%86%AB%207f6723ab542147d5a9f4b6ecf94cc5c9/Untitled%202.png)

<검증 코드 전환>

```java
assetThat(user2.getName(), is(user.getName));
```

<JUnit 테스트 실행>

![2-2%20UserDaoTest%20%E1%84%80%E1%85%A2%E1%84%89%E1%85%A5%E1%86%AB%207f6723ab542147d5a9f4b6ecf94cc5c9/Untitled%203.png](2-2%20UserDaoTest%20%E1%84%80%E1%85%A2%E1%84%89%E1%85%A5%E1%86%AB%207f6723ab542147d5a9f4b6ecf94cc5c9/Untitled%203.png)

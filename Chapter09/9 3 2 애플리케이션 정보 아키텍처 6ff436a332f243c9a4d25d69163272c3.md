# 9.3.2 애플리케이션 정보 아키텍처

- 엔터프라이즈 시스템은 본질적으로 동시에 많은 작업이 빠르게 수행돼어야 하는 시스템
- 일반적으로 사용자의 요청을 처리하는 동안만 간단한 상태를 유지
- 애플리케이션의 주요 상태정보는 클라이언트나 백엔드 시스템에 분산돼서 보관
- 애플리케이션을 사이에 두고 흘러다니는 정보를 어떤 식으로 다룰지를 결정하는 일도 아키텍처를 결정할 때 매우 중요한 기준이 됨

<DB/SQL 중심의 로직 구현 방식>

- 데이터 중심 구조의 특징은 하나의 업무 트랜잭션에 모든 계층의 코드가 종속되는 경향이 있다는 점
- 대용량 데이터를 다루면서 빠른 처리가 필요한 경우에는 일부 로직을 DB 내에 존재하는 PL/SQL 과 같은 저장 프로시저 형태로 만들기도 한다
- 조회 로직이 조건이 많고 복잡하다면 그만큼 복잡한 SQL 이 만들어질 것
- 대부분의 코드는 대응되는 작업 단위로 1:1 로 매핑
- 여러 작업에서 반복되는 기능이 있다면 그에 대한 코드는 중복되기 쉽다
- 보통 작업 단위, 즉, 업무 트랜잭션 단위로 코드를 묶어서 만들지 기능을 세분화해서 분리하고 재사용하지 않기 때문이다.

    ![9%203%202%20%E1%84%8B%E1%85%A2%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8F%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%A7%E1%86%AB%20%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%87%E1%85%A9%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%206ff436a332f243c9a4d25d69163272c3/Untitled.png](9%203%202%20%E1%84%8B%E1%85%A2%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8F%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%A7%E1%86%AB%20%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%87%E1%85%A9%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%206ff436a332f243c9a4d25d69163272c3/Untitled.png)

- 이런 방식은 처음에 개발하기 쉬움. 계층으로 세분화되기는 하지만 업무 트랜잭션 또는 요구사항별로 구분해서 코드를 만드는 건 쉽다
- 툴이나 코드 생성기를 이용해서 자동화하는데도 유리
- 하지만 이런 방식은 자바 코드를 단지 DB와 웹 화면을 연결해주는 단순한 인터페이스 도구로 전략시키는 것
- 자바의 영역이 축소됨
- DB 중심의 업무 단위로 코드를 만들면 애플리케이션 내에서 플러다니는 정보는 항상 단순한 포맷의 데이터
- 이런 개발 방식은 변화에 매우 취약함
- 객체지향의 장점이 별로 활용되지 못하고 각 계층의 코드가 긴밀하게 연결되있으며 중복을 제거하기 어려움
- 로직을 DB. SQL에 많이 담으면 확장성이 떨어짐
- 로직을 애플리케이션으로 가져오는 편이 유리
- SQL이나 저장 프로시저에 담긴 로직은 테스트하기 어려움
- DB에는 부하를 가능한 한 주지 않는 간단한 작업만 하고 복잡한 로직은 오브젝트에 담아서 애플리케이션 내에서 처리하도록 만드는 게 좋음
- 

<거대한 서비스 계층 방식>

- DB에 많은 로직을 두는 개발 방법의 단점을 피하면서 애플리케이션 코드의 비중을 높이는 방법
- DB에는 부하가 걸리지 않도록 저장 프로시저의 사용을 자제하고 복잡한 SQL을 피하면서 주요 로직은 서비스 계층의 코드에서 처리하도록 만드는 것
- DAO에서 좀 더 단순한 결과를 돌려주는 형태
- 서비스 계층 코드에서 재사용이 가능해짐
- 비즈니스 로직이 대부분을 서비스 계층에 집중하는 방법은 거대한 서비스 계층을 만들게 됨
- 

![9%203%202%20%E1%84%8B%E1%85%A2%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8F%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%A7%E1%86%AB%20%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%87%E1%85%A9%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%206ff436a332f243c9a4d25d69163272c3/Untitled%201.png](9%203%202%20%E1%84%8B%E1%85%A2%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8F%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%89%E1%85%A7%E1%86%AB%20%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%87%E1%85%A9%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%206ff436a332f243c9a4d25d69163272c3/Untitled%201.png)

- 거대 서비스 계층 방식의 장점은 애플리케이션의 코드에 비즈니스 로직이 담겨 있기 때문에 자바 언어의 장점을 활용해 로직을 구현할 수 있고 테스트하기도 수월하다는 점
- DAO가 다루는 SQL 이 복잡하지 않고 프레젠테이션 계층의 뷰와 1:1 로 매핑되지 않아도 되기 때문에 일부 DAO 코드는 여러 비즈니스 로직에서 공유해서 사용할 수 있다
- 하지만 데이터 액세스 계층의 SQL 은 서비스 계층의 비즈니스 로직의 필요에 따라 만들어지기 쉽다
- 계층간의 결합도가 여전히 크다
- DAO가 제공해주는 값의 포맷에 따라 이를 취급하는 방법이 달라짐
- 중복이 발생
- 그렇지만 각 단위 업무별로 독립적인 개발이 가능하므로 초기 개발 속도가 빠르고 개발자 사이에 간섭없이 독립적인 개발이 가능하다는 장점
- 핵심 로직이 자바 코드 안에 담겨 있으므로 테스트하기가 상대적으로 수월
- 하지만 본격적인 객체지향적 설계를 적용하기 힘들고 개발자 개개인의 코딩 습관이나 실력에 따라서 비슷한 로직이더라고 전혀 다른 스타일의 코드가 나오기 십상
- 데이터 중심 아키텍처의 특징은 계층 사이의 결합도가 높은 편이고 응집도는 떨어진다는 점
- 중복 코드 관리 어려움